model Order {
    id          String      @id @default(uuid()) @db.Uuid
    status      OrderStatus @default(PLACED)
    totalAmount Float
    createdAt   DateTime    @default(now())
    updatedAt   DateTime    @updatedAt

    userId String
    user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

    items OrderItem[]

    shippingAddress Json
    paymentMethod   PaymentMethod @default(CASH_ON_DELIVERY)

    @@map("order")
}

model OrderItem {
    id       String @id @default(uuid()) @db.Uuid
    quantity Int
    price    Float

    orderId String @db.Uuid
    order   Order  @relation(fields: [orderId], references: [id], onDelete: Cascade)

    medicineId String   @db.Uuid
    medicine   Medicine @relation(fields: [medicineId], references: [id], onDelete: Restrict)

    @@map("order_item")
}

enum OrderStatus {
    PLACED
    CONFIRMED
    PROCESSING
    SHIPPED
    DELIVERED
    CANCELLED
}

enum PaymentMethod {
    CREDIT_CARD
    DEBIT_CARD
    MOBILE_PAYMENT
    CASH_ON_DELIVERY
}
