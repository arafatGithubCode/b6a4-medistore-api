model Order {
    id          String      @id @default(uuid()) @db.Uuid
    status      OrderStatus @default(PLACED)
    totalAmount Decimal     @db.Decimal(10, 2)
    createdAt   DateTime    @default(now())
    updatedAt   DateTime    @updatedAt

    userId String
    user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

    items OrderItem[]

    @@map("order")
}

enum OrderStatus {
    PLACED
    CONFIRMED
    PROCESSING
    SHIPPED
    DELIVERED
    CANCELLED
}

model OrderItem {
    id        String   @id @default(uuid()) @db.Uuid
    quantity  Int
    price     Decimal  @db.Decimal(10, 2)
    createdAt DateTime @default(now())

    orderId String @db.Uuid
    order   Order  @relation(fields: [orderId], references: [id], onDelete: Cascade)

    medicineId String   @db.Uuid
    medicine   Medicine @relation(fields: [medicineId], references: [id], onDelete: Cascade)

    @@unique([orderId, medicineId])
    @@index([medicineId])
    @@map("order_item")
}
